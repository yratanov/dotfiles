HISTFILE=~/.zsh_history
HISTSIZE=10000
SAVEHIST=10000
setopt SHARE_HISTORY

ZSH_AUTOSUGGEST_HIGHLIGHT_STYLE="fg=#878ede"

# Ember aliases
alias es="ember s --proxy=http://localhost:3000"
alias exam="ember exam --split=10 --parallel > log/test.log"

alias qa="ssh -i ~/.ssh/aws_id_ed25519 pulse-rw@bastionqa.satchel.cloud"
alias prod="ssh -i ~/.ssh/aws_id_ed25519 pulse-rw@bastionprod.satchel.cloud"
alias ukprod="ssh -i ~/.ssh/aws_id_ed25519 pulse-uk-rw@bastionprod.satchel.cloud"
alias ukqa="ssh -i ~/.ssh/aws_id_ed25519 pulse-uk-rw@bastionqa.satchel.cloud"
alias thrqa="ssh -i .ssh/id_rsa satchel-thrive-rw@bastionqa.satchel.cloud"
alias caprod="ssh -i ~/.ssh/aws_id_ed25519 pulse-ca-rw@bastionprod.satchel.cloud"
alias caqa="ssh -i ~/.ssh/aws_id_ed25519 pulse-ca-rw@bastionqa.satchel.cloud"


alias ccqa="ssh -i ~/.ssh/aws_id_ed25519 career-clutch-rw@bastionqa.satchel.cloud"
alias ccprod="ssh -i ~/.ssh/aws_id_ed25519 career-clutch-rw@bastionprod.satchel.cloud"

alias rc="rails console"
alias rdm="rake db:migrate"
alias rdr="rake db:rollback"
alias rgm="rails g migration"
alias test-db-reset="rake db:drop RAILS_ENV=test && rake db:create RAILS_ENV=test && rake db:structure:load RAILS_ENV=test"
alias src="spring rails c"
alias bi="bundle install"
alias bsq="bundle exec sidekiq -C config/sidekiq.yml"
alias bsqc="bundle exec sidekiq -C config/sidekiq.sel_calculations.yml"
alias bsqb="bundle exec sidekiq -C config/sidekiq.skills_benchmarks.yml"
alias ber="bundle exec rspec"
alias psp="COVERAGE=true bundle exec rake parallel:spec"
alias mux="tmuxinator"
alias nv="nvim"
alias merge_qa="~/.config/nvim/scripts/git_merge_current_to_qa.sh"
alias tt="~/.bin/new-tmux-session.sh"
alias nb="~/.bin/feature-branch.sh"
alias gpr="gh pr create -f -r drosam,pikislabis,Nerian"
alias tw="tw --theme catppuccin"

alias lg="lazygit"

# Docker aliases
alias dcw="docker compose exec web"
alias dcd="docker compose down"
alias dcu="docker compose up -d"

alias git-rev="git restore --source=HEAD^ --staged --worktree"
alias gcnv="git commit --no-verify"

if [[ "$(uname)" == "Linux" ]]; then
  alias ll="ls -lAhF --color=auto --group-directories-first"
  alias open='xdg-open'
  alias SatchelVPN="~/.bin/toggle_service.sh openvpn-client@satchelcloud"

  # Pacman/yay aliases
  alias pas="sudo pacman -S"
  alias pad="sudo pacman -R"
  alias yas="yay -S"
  alias yad="yay -R"
  alias rofi-refresh='update-desktop-database ~/.local/share/applications && rm -f ~/.cache/rofi-drun-desktop.cache'

  source <(fzf --zsh)
  source /usr/share/zsh/plugins/zsh-autosuggestions/zsh-autosuggestions.zsh

  export PATH="$HOME/.bin:$PATH:/var/lib/snapd/snap/bin"
else
  alias ll="ls -lAhG"

  export PATH="/opt/homebrew/opt/postgresql@12/bin:$HOME/.bin:/opt/homebrew/opt/openjdk/bin:$PATH"
  export LDFLAGS="-L/opt/homebrew/opt/postgresql@12/lib"
  export PKG_CONFIG_PATH="/opt/homebrew/opt/postgresql@12/lib/pkgconfig"
  export CPPFLAGS="-I/opt/homebrew/opt/postgresql@12/include"

  [ -f ~/.fzf.zsh ] && source ~/.fzf.zsh
  source /opt/homebrew/share/zsh-autosuggestions/zsh-autosuggestions.zsh
fi
export EDITOR='nvim'
alias dfl='/usr/bin/git --git-dir=$HOME/.dotfiles/ --work-tree=$HOME'


eval "$(starship init zsh)"
eval "$(mise activate zsh)"

bindkey '^A' beginning-of-line
bindkey '^E' end-of-line

autoload -Uz compinit
compinit
source ~/.config/zsh/gh
export PATH="$HOME/.local/bin:$PATH"
